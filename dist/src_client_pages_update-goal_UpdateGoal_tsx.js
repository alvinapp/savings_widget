"use strict";
(self["webpackChunksavings_widget"] = self["webpackChunksavings_widget"] || []).push([["src_client_pages_update-goal_UpdateGoal_tsx"],{

/***/ "./src/client/pages/update-goal/UpdateGoal.tsx":
/*!*****************************************************!*\
  !*** ./src/client/pages/update-goal/UpdateGoal.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");
/* harmony import */ var client_assets_images_savings_overlay_svg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! client/assets/images/savings/overlay.svg */ "./src/client/assets/images/savings/overlay.svg");
/* harmony import */ var _components_NavBar__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/NavBar */ "./src/client/pages/components/NavBar.tsx");
/* harmony import */ var _components_BackButton__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/BackButton */ "./src/client/pages/components/BackButton.tsx");
/* harmony import */ var _components_CloseButton__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/CloseButton */ "./src/client/pages/components/CloseButton.tsx");
/* harmony import */ var _components_AddPhotoButton__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/AddPhotoButton */ "./src/client/pages/components/AddPhotoButton.tsx");
/* harmony import */ var _components_goal_creation_Input__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/goal-creation/Input */ "./src/client/pages/components/goal-creation/Input.tsx");
/* harmony import */ var react_icons_fi__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-icons/fi */ "./node_modules/react-icons/fi/index.esm.js");
/* harmony import */ var _components_MainButton__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../components/MainButton */ "./src/client/pages/components/MainButton.tsx");
/* harmony import */ var react_spring_bottom_sheet__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react-spring-bottom-sheet */ "./node_modules/react-spring-bottom-sheet/dist/index.es.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");
/* harmony import */ var client_store_goalStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! client/store/goalStore */ "./src/client/store/goalStore.ts");
/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-query */ "./node_modules/react-query/es/index.js");
/* harmony import */ var client_api_goal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! client/api/goal */ "./src/client/api/goal.ts");
/* harmony import */ var client_store_configuration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! client/store/configuration */ "./src/client/store/configuration.ts");
/* harmony import */ var client_store_goalContributionSettingsStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! client/store/goalContributionSettingsStore */ "./src/client/store/goalContributionSettingsStore.ts");
/* harmony import */ var _goal_creation_AddContributionSettings__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../goal-creation/AddContributionSettings */ "./src/client/pages/goal-creation/AddContributionSettings.tsx");
/* harmony import */ var client_utils_Formatters__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! client/utils/Formatters */ "./src/client/utils/Formatters.ts");
/* harmony import */ var client_store_bankAccountStore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! client/store/bankAccountStore */ "./src/client/store/bankAccountStore.ts");
/* harmony import */ var _components_goal_creation_SelectBank__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../components/goal-creation/SelectBank */ "./src/client/pages/components/goal-creation/SelectBank.tsx");




















const UpdateGoalDetails = () => {
    var _a, _b, _c;
    const goalContributionSettings = (0,client_store_goalContributionSettingsStore__WEBPACK_IMPORTED_MODULE_2__["default"])((state) => state);
    const goal = (0,client_store_goalStore__WEBPACK_IMPORTED_MODULE_3__["default"])((state) => state);
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();
    const configuration = (0,client_store_configuration__WEBPACK_IMPORTED_MODULE_5__.useConfigurationStore)((state) => state.configuration);
    const accountStore = (0,client_store_bankAccountStore__WEBPACK_IMPORTED_MODULE_6__["default"])((state) => state);
    const { isLoading, refetch: updateGoals } = (0,react_query__WEBPACK_IMPORTED_MODULE_1__.useQuery)("update-goals", () => (0,client_api_goal__WEBPACK_IMPORTED_MODULE_7__.updateGoal)({
        configuration: configuration,
        goalId: goal.confirmedGoal.id,
        data: {
            extern_id: "",
            name: goal.goalName,
            title: "",
            amount: parseFloat(goal.goalAmount),
            contribute_from: "",
            is_customized: false,
        },
    })
        .then((result) => {
        if (result.id) {
            goal.setContributionSettingsGoalId(result.id);
            //update bank account
            // if (accountStore.account) {
            //   updateGoalBankAccount({
            //     configuration: configuration,
            //     data: {
            //       goal_id: result.id,
            //       bank_account_id:
            //         accountStore.savingAccount.savings_account?.id,
            //     },
            //   });
            // }
        }
    })
        .finally(() => {
        navigate(-2);
    }), {
        refetchOnWindowFocus: false,
        enabled: false,
    });
    const { data: saveImage } = (0,react_query__WEBPACK_IMPORTED_MODULE_1__.useQuery)("save-goal-image", () => (0,client_api_goal__WEBPACK_IMPORTED_MODULE_7__.saveGoalImage)({
        configuration: configuration,
        data: {
            image_url: goal.goalImageUrl,
        },
        goalId: goal.confirmedGoal.id,
    }), {
        refetchOnWindowFocus: false,
        enabled: !!goal.confirmedGoal.id,
    });
    const valid = !!goal.goalAmount &&
        goal.goalName &&
        accountStore.savingAccount.savings_account;
    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "h-screen w-screen relative" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "h-1/2 absolute top-0 left-0 right-0" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "relative" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img", { src: goal.goalImageUrl ? goal.goalImageUrl : "", className: "absolute top-0 right-0 left-0 w-screen h-72" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img", { src: client_assets_images_savings_overlay_svg__WEBPACK_IMPORTED_MODULE_8__, className: "absolute object-cover w-screen h-72" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "absolute top-28 left-0 right-0 flex flex-col items-center" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "mb-3" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_AddPhotoButton__WEBPACK_IMPORTED_MODULE_9__.AddPhotoButton, { onClick: () => navigate("/image-selection") }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "font-poppins font-medium text-xs text-white tracking-subtitle" }, { children: "Tap to personalize cover photo" }))] }))] })) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "mt-6 absolute top-0 right-0 left-0 px-3.5" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_NavBar__WEBPACK_IMPORTED_MODULE_10__["default"], { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "flex flex-row justify-between items-center" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_BackButton__WEBPACK_IMPORTED_MODULE_11__["default"], { background: "bg-skin-base", onClick: () => {
                                    // unconfirmedGoals();
                                    navigate(-1);
                                } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_CloseButton__WEBPACK_IMPORTED_MODULE_12__["default"], { background: "bg-skin-base", onClick: () => {
                                    // unconfirmedGoals();
                                    navigate(-1);
                                } })] })) }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "w-screen rounded-t-3xl bg-skin-base absolute right-0 left-0 top-48 bottom-0 px-3.5 pt-9" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "mb-6" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_goal_creation_Input__WEBPACK_IMPORTED_MODULE_13__.TextInput, { placeHolder: "Add goal name", label: "Let\u2019s name your goal", value: goal.goalName ? goal.goalName : "", leadingIcon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_14__.FiFlag, { size: "1.375rem" }), addValue: (e) => goal.setGoalName(e), clearInput: () => {
                                goal.setGoalName("");
                            } }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", Object.assign({ className: "mb-6" }, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_goal_creation_Input__WEBPACK_IMPORTED_MODULE_13__.TextInput, { hasCurrencySymbol: true, type: "number", placeHolder: "Add target amount", label: "What\u2019s your target amount?", value: goal.goalAmount ? goal.goalAmount : "", leadingIcon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_14__.FiTarget, { size: "1.375rem" }), addValue: (e) => goal.setGoalAmount(e), clearInput: () => goal.setGoalAmount("") }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "mb-6" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_goal_creation_Input__WEBPACK_IMPORTED_MODULE_13__.TextInputWithPopup, { placeHolder: "Add contribution", value: `${goal === null || goal === void 0 ? void 0 : goal.goalContributionFrequency}`, leadingIcon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_14__.FiPocket, { size: "1.375rem" }), hasValue: !!goal.goalContributionFrequency, onClick: () => goalContributionSettings.openContributionSettingsBottomSheet(true), addValue: (e) => e, clearInput: () => goal.setGoalFrequency("") }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_spring_bottom_sheet__WEBPACK_IMPORTED_MODULE_15__.BottomSheet, { open: goalContributionSettings.openContributionSettingsSheet, style: {
                                    borderRadius: 24,
                                }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_goal_creation_AddContributionSettings__WEBPACK_IMPORTED_MODULE_16__.AddContributionSettings, { updatingGoal: true, onClick: () => {
                                        goalContributionSettings.openContributionSettingsBottomSheet(false);
                                        goalContributionSettings.setContributionAmount(0);
                                    } }), defaultSnap: 300 })] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", Object.assign({ className: "mb-6" }, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_goal_creation_Input__WEBPACK_IMPORTED_MODULE_13__.TextInputWithPopup, { placeHolder: "Link bank or wallet", label: "Link an account and track savings with ease", value: Object.keys(accountStore.savingAccount).length !== 0
                                    ? `${accountStore.savingAccount.savings_account
                                        .savings_account_details.bank_name === undefined
                                        ? ""
                                        : (_a = accountStore.savingAccount.savings_account
                                            .savings_account_details) === null || _a === void 0 ? void 0 : _a.bank_name},${accountStore.savingAccount.savings_account
                                        .savings_account_details.account_number === undefined
                                        ? ""
                                        : (0,client_utils_Formatters__WEBPACK_IMPORTED_MODULE_17__.maskCreditCardNumber)((_b = accountStore.savingAccount.savings_account.savings_account_details) === null || _b === void 0 ? void 0 : _b.account_number.toString())}`
                                    : "", hasValue: Object.keys(accountStore.savingAccount).length !== 0
                                    ? !!((_c = accountStore.savingAccount.savings_account
                                        .savings_account_details) === null || _c === void 0 ? void 0 : _c.bank_name)
                                    : false, leadingIcon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_icons_fi__WEBPACK_IMPORTED_MODULE_14__.FiPocket, { size: "1.375rem" }), addValue: (e) => e, onClick: () => {
                                    // accountStore.openUpdateAccountBottomSheet(true);
                                }, clearInput: () => {
                                    // accountStore.setSavingAccount({});
                                } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_spring_bottom_sheet__WEBPACK_IMPORTED_MODULE_15__.BottomSheet, { onDismiss: () => accountStore.openUpdateAccountBottomSheet(false), open: accountStore.updateAccountBottomSheet, style: {
                                    borderRadius: 24,
                                }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_goal_creation_SelectBank__WEBPACK_IMPORTED_MODULE_18__.SelectBank, { updateBank: true }), defaultSnap: 300 })] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_MainButton__WEBPACK_IMPORTED_MODULE_19__["default"], { title: "Save changes", click: () => updateGoals(), loading: isLoading, isDisabled: !valid })] }))] })));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UpdateGoalDetails);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3JjX2NsaWVudF9wYWdlc191cGRhdGUtZ29hbF9VcGRhdGVHb2FsX3RzeC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQytEO0FBQ3JCO0FBQ1E7QUFDRTtBQUNVO0FBSW5CO0FBQytCO0FBQ3hCO0FBQ007QUFDVDtBQUNHO0FBRVg7QUFPZDtBQUNtRDtBQUNjO0FBRVA7QUFDcEI7QUFDQztBQUNJO0FBQ3BFLE1BQU0saUJBQWlCLEdBQUcsR0FBRyxFQUFFOztJQUM3QixNQUFNLHdCQUF3QixHQUFHLHNGQUFnQyxDQUMvRCxDQUFDLEtBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUN0QixDQUFDO0lBQ0YsTUFBTSxJQUFJLEdBQUcsa0VBQVksQ0FBQyxDQUFDLEtBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFakQsTUFBTSxRQUFRLEdBQUcsNkRBQVcsRUFBRSxDQUFDO0lBQy9CLE1BQU0sYUFBYSxHQUFHLGlGQUFxQixDQUN6QyxDQUFDLEtBQVUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FDekIsQ0FBQztJQUNiLE1BQU0sWUFBWSxHQUFHLHlFQUFtQixDQUFDLENBQUMsS0FBVSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsR0FBRyxxREFBUSxDQUNsRCxjQUFjLEVBQ2QsR0FBRyxFQUFFLENBQ0gsMkRBQVUsQ0FBQztRQUNULGFBQWEsRUFBRSxhQUFhO1FBQzVCLE1BQU0sRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUU7UUFDN0IsSUFBSSxFQUFFO1lBQ0osU0FBUyxFQUFFLEVBQUU7WUFDYixJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDbkIsS0FBSyxFQUFFLEVBQUU7WUFDVCxNQUFNLEVBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDbkMsZUFBZSxFQUFF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QUMsS0FBSyxHQUNsQixLQUNFLEtBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBQ0YsaUVBQWUsaUJBQWlCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zYXZpbmdzLXdpZGdldC8uL3NyYy9jbGllbnQvcGFnZXMvdXBkYXRlLWdvYWwvVXBkYXRlR29hbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgb3ZlcmxheSBmcm9tIFwiY2xpZW50L2Fzc2V0cy9pbWFnZXMvc2F2aW5ncy9vdmVybGF5LnN2Z1wiO1xuaW1wb3J0IE5hdkJhciBmcm9tIFwiLi4vY29tcG9uZW50cy9OYXZCYXJcIjtcbmltcG9ydCBCYWNrQnV0dG9uIGZyb20gXCIuLi9jb21wb25lbnRzL0JhY2tCdXR0b25cIjtcbmltcG9ydCBDbG9zZUJ1dHRvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9DbG9zZUJ1dHRvblwiO1xuaW1wb3J0IHsgQWRkUGhvdG9CdXR0b24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BZGRQaG90b0J1dHRvblwiO1xuaW1wb3J0IHtcbiAgVGV4dElucHV0LFxuICBUZXh0SW5wdXRXaXRoUG9wdXAsXG59IGZyb20gXCIuLi9jb21wb25lbnRzL2dvYWwtY3JlYXRpb24vSW5wdXRcIjtcbmltcG9ydCB7IEZpRmxhZywgRmlUYXJnZXQsIEZpUG9ja2V0LCBGaVRyZW5kaW5nVXAgfSBmcm9tIFwicmVhY3QtaWNvbnMvZmlcIjtcbmltcG9ydCBNYWluQnV0dG9uIGZyb20gXCIuLi9jb21wb25lbnRzL01haW5CdXR0b25cIjtcbmltcG9ydCB7IEJvdHRvbVNoZWV0IH0gZnJvbSBcInJlYWN0LXNwcmluZy1ib3R0b20tc2hlZXRcIjtcbmltcG9ydCB7IHVzZU5hdmlnYXRlIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCB1c2VHb2FsU3RvcmUgZnJvbSBcImNsaWVudC9zdG9yZS9nb2FsU3RvcmVcIjtcbmltcG9ydCB1c2VNb250aGx5SW5jb21lU3RvcmUgZnJvbSBcImNsaWVudC9zdG9yZS9tb250aGx5SW5jb21lXCI7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gXCJyZWFjdC1xdWVyeVwiO1xuaW1wb3J0IHtcbiAgY29uZmlybUdvYWwsXG4gIHNhdmVBR29hbCxcbiAgc2F2ZUdvYWxJbWFnZSxcbiAgdXBkYXRlR29hbCxcbiAgdXBkYXRlR29hbEJhbmtBY2NvdW50LFxufSBmcm9tIFwiY2xpZW50L2FwaS9nb2FsXCI7XG5pbXBvcnQgeyBJQ29uZmlnLCB1c2VDb25maWd1cmF0aW9uU3RvcmUgfSBmcm9tIFwiY2xpZW50L3N0b3JlL2NvbmZpZ3VyYXRpb25cIjtcbmltcG9ydCB1c2VHb2FsQ29udHJpYnV0aW9uU2V0dGluZ3NTdG9yZSBmcm9tIFwiY2xpZW50L3N0b3JlL2dvYWxDb250cmlidXRpb25TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgZGVsZXRlVW5jb25maXJtZWQgZnJvbSBcImNsaWVudC9hcGkvZGVsZXRlLXVuY29uZmlybWVkLWdvYWxzXCI7XG5pbXBvcnQgeyBBZGRDb250cmlidXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi9nb2FsLWNyZWF0aW9uL0FkZENvbnRyaWJ1dGlvblNldHRpbmdzXCI7XG5pbXBvcnQgeyBtYXNrQ3JlZGl0Q2FyZE51bWJlciB9IGZyb20gXCJjbGllbnQvdXRpbHMvRm9ybWF0dGVyc1wiO1xuaW1wb3J0IHVzZUJhbmtBY2NvdW50U3RvcmUgZnJvbSBcImNsaWVudC9zdG9yZS9iYW5rQWNjb3VudFN0b3JlXCI7XG5pbXBvcnQgeyBTZWxlY3RCYW5rIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZ29hbC1jcmVhdGlvbi9TZWxlY3RCYW5rXCI7XG5jb25zdCBVcGRhdGVHb2FsRGV0YWlscyA9ICgpID0+IHtcbiAgY29uc3QgZ29hbENvbnRyaWJ1dGlvblNldHRpbmdzID0gdXNlR29hbENvbnRyaWJ1dGlvblNldHRpbmdzU3RvcmUoXG4gICAgKHN0YXRlOiBhbnkpID0+IHN0YXRlXG4gICk7XG4gIGNvbnN0IGdvYWwgPSB1c2VHb2FsU3RvcmUoKHN0YXRlOiBhbnkpID0+IHN0YXRlKTtcblxuICBjb25zdCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSB1c2VDb25maWd1cmF0aW9uU3RvcmUoXG4gICAgKHN0YXRlOiBhbnkpID0+IHN0YXRlLmNvbmZpZ3VyYXRpb25cbiAgKSBhcyBJQ29uZmlnO1xuICBjb25zdCBhY2NvdW50U3RvcmUgPSB1c2VCYW5rQWNjb3VudFN0b3JlKChzdGF0ZTogYW55KSA9PiBzdGF0ZSk7XG4gIGNvbnN0IHsgaXNMb2FkaW5nLCByZWZldGNoOiB1cGRhdGVHb2FscyB9ID0gdXNlUXVlcnkoXG4gICAgXCJ1cGRhdGUtZ29hbHNcIixcbiAgICAoKSA9PlxuICAgICAgdXBkYXRlR29hbCh7XG4gICAgICAgIGNvbmZpZ3VyYXRpb246IGNvbmZpZ3VyYXRpb24sXG4gICAgICAgIGdvYWxJZDogZ29hbC5jb25maXJtZWRHb2FsLmlkLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXh0ZXJuX2lkOiBcIlwiLFxuICAgICAgICAgIG5hbWU6IGdvYWwuZ29hbE5hbWUsXG4gICAgICAgICAgdGl0bGU6IFwiXCIsXG4gICAgICAgICAgYW1vdW50OiBwYXJzZUZsb2F0KGdvYWwuZ29hbEFtb3VudCksXG4gICAgICAgICAgY29udHJpYnV0ZV9mcm9tOiBcIlwiLFxuICAgICAgICAgIGlzX2N1c3RvbWl6ZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQuaWQpIHtcbiAgICAgICAgICAgIGdvYWwuc2V0Q29udHJpYnV0aW9uU2V0dGluZ3NHb2FsSWQocmVzdWx0LmlkKTtcbiAgICAgICAgICAgIC8vdXBkYXRlIGJhbmsgYWNjb3VudFxuICAgICAgICAgICAgLy8gaWYgKGFjY291bnRTdG9yZS5hY2NvdW50KSB7XG4gICAgICAgICAgICAvLyAgIHVwZGF0ZUdvYWxCYW5rQWNjb3VudCh7XG4gICAgICAgICAgICAvLyAgICAgY29uZmlndXJhdGlvbjogY29uZmlndXJhdGlvbixcbiAgICAgICAgICAgIC8vICAgICBkYXRhOiB7XG4gICAgICAgICAgICAvLyAgICAgICBnb2FsX2lkOiByZXN1bHQuaWQsXG4gICAgICAgICAgICAvLyAgICAgICBiYW5rX2FjY291bnRfaWQ6XG4gICAgICAgICAgICAvLyAgICAgICAgIGFjY291bnRTdG9yZS5zYXZpbmdBY2NvdW50LnNhdmluZ3NfYWNjb3VudD8uaWQsXG4gICAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAgIC8vICAgfSk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgbmF2aWdhdGUoLTIpO1xuICAgICAgICB9KSxcbiAgICB7XG4gICAgICByZWZldGNoT25XaW5kb3dGb2N1czogZmFsc2UsXG4gICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHsgZGF0YTogc2F2ZUltYWdlIH0gPSB1c2VRdWVyeShcbiAgICBcInNhdmUtZ29hbC1pbWFnZVwiLFxuICAgICgpID0+XG4gICAgICBzYXZlR29hbEltYWdlKHtcbiAgICAgICAgY29uZmlndXJhdGlvbjogY29uZmlndXJhdGlvbixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGltYWdlX3VybDogZ29hbC5nb2FsSW1hZ2VVcmwsXG4gICAgICAgIH0sXG4gICAgICAgIGdvYWxJZDogZ29hbC5jb25maXJtZWRHb2FsLmlkLFxuICAgICAgfSksXG4gICAge1xuICAgICAgcmVmZXRjaE9uV2luZG93Rm9jdXM6IGZhbHNlLFxuICAgICAgZW5hYmxlZDogISFnb2FsLmNvbmZpcm1lZEdvYWwuaWQsXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IHZhbGlkID1cbiAgICAhIWdvYWwuZ29hbEFtb3VudCAmJlxuICAgIGdvYWwuZ29hbE5hbWUgJiZcbiAgICBhY2NvdW50U3RvcmUuc2F2aW5nQWNjb3VudC5zYXZpbmdzX2FjY291bnQ7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJoLXNjcmVlbiB3LXNjcmVlbiByZWxhdGl2ZVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEvMiBhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgcmlnaHQtMFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgPGltZ1xuICAgICAgICAgICAgc3JjPXtnb2FsLmdvYWxJbWFnZVVybCA/IGdvYWwuZ29hbEltYWdlVXJsIDogXCJcIn1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIHJpZ2h0LTAgbGVmdC0wIHctc2NyZWVuIGgtNzJcIlxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGltZyBzcmM9e292ZXJsYXl9IGNsYXNzTmFtZT1cImFic29sdXRlIG9iamVjdC1jb3ZlciB3LXNjcmVlbiBoLTcyXCIgLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yOCBsZWZ0LTAgcmlnaHQtMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zXCI+XG4gICAgICAgICAgICAgIDxBZGRQaG90b0J1dHRvbiBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZShcIi9pbWFnZS1zZWxlY3Rpb25cIil9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1wb3BwaW5zIGZvbnQtbWVkaXVtIHRleHQteHMgdGV4dC13aGl0ZSB0cmFja2luZy1zdWJ0aXRsZVwiPlxuICAgICAgICAgICAgICBUYXAgdG8gcGVyc29uYWxpemUgY292ZXIgcGhvdG9cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02IGFic29sdXRlIHRvcC0wIHJpZ2h0LTAgbGVmdC0wIHB4LTMuNVwiPlxuICAgICAgICA8TmF2QmFyXG4gICAgICAgICAgY2hpbGRyZW49e1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPEJhY2tCdXR0b25cbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kPVwiYmctc2tpbi1iYXNlXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyB1bmNvbmZpcm1lZEdvYWxzKCk7XG4gICAgICAgICAgICAgICAgICBuYXZpZ2F0ZSgtMSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPENsb3NlQnV0dG9uXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZD1cImJnLXNraW4tYmFzZVwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gdW5jb25maXJtZWRHb2FscygpO1xuICAgICAgICAgICAgICAgICAgbmF2aWdhdGUoLTEpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1zY3JlZW4gcm91bmRlZC10LTN4bCBiZy1za2luLWJhc2UgYWJzb2x1dGUgcmlnaHQtMCBsZWZ0LTAgdG9wLTQ4IGJvdHRvbS0wIHB4LTMuNSBwdC05XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICAgIDxUZXh0SW5wdXRcbiAgICAgICAgICAgIHBsYWNlSG9sZGVyPVwiQWRkIGdvYWwgbmFtZVwiXG4gICAgICAgICAgICBsYWJlbD1cIkxldOKAmXMgbmFtZSB5b3VyIGdvYWxcIlxuICAgICAgICAgICAgdmFsdWU9e2dvYWwuZ29hbE5hbWUgPyBnb2FsLmdvYWxOYW1lIDogXCJcIn1cbiAgICAgICAgICAgIGxlYWRpbmdJY29uPXs8RmlGbGFnIHNpemU9XCIxLjM3NXJlbVwiIC8+fVxuICAgICAgICAgICAgYWRkVmFsdWU9eyhlKSA9PiBnb2FsLnNldEdvYWxOYW1lKGUpfVxuICAgICAgICAgICAgY2xlYXJJbnB1dD17KCkgPT4ge1xuICAgICAgICAgICAgICBnb2FsLnNldEdvYWxOYW1lKFwiXCIpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgPFRleHRJbnB1dFxuICAgICAgICAgICAgaGFzQ3VycmVuY3lTeW1ib2w9e3RydWV9XG4gICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgIHBsYWNlSG9sZGVyPVwiQWRkIHRhcmdldCBhbW91bnRcIlxuICAgICAgICAgICAgbGFiZWw9XCJXaGF04oCZcyB5b3VyIHRhcmdldCBhbW91bnQ/XCJcbiAgICAgICAgICAgIHZhbHVlPXtnb2FsLmdvYWxBbW91bnQgPyBnb2FsLmdvYWxBbW91bnQgOiBcIlwifVxuICAgICAgICAgICAgbGVhZGluZ0ljb249ezxGaVRhcmdldCBzaXplPVwiMS4zNzVyZW1cIiAvPn1cbiAgICAgICAgICAgIGFkZFZhbHVlPXsoZSkgPT4gZ29hbC5zZXRHb2FsQW1vdW50KGUpfVxuICAgICAgICAgICAgY2xlYXJJbnB1dD17KCkgPT4gZ29hbC5zZXRHb2FsQW1vdW50KFwiXCIpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgICA8VGV4dElucHV0V2l0aFBvcHVwXG4gICAgICAgICAgICBwbGFjZUhvbGRlcj1cIkFkZCBjb250cmlidXRpb25cIlxuICAgICAgICAgICAgdmFsdWU9e2Ake2dvYWw/LmdvYWxDb250cmlidXRpb25GcmVxdWVuY3l9YH1cbiAgICAgICAgICAgIGxlYWRpbmdJY29uPXs8RmlQb2NrZXQgc2l6ZT1cIjEuMzc1cmVtXCIgLz59XG4gICAgICAgICAgICBoYXNWYWx1ZT17ISFnb2FsLmdvYWxDb250cmlidXRpb25GcmVxdWVuY3l9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICBnb2FsQ29udHJpYnV0aW9uU2V0dGluZ3Mub3BlbkNvbnRyaWJ1dGlvblNldHRpbmdzQm90dG9tU2hlZXQodHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZFZhbHVlPXsoZSkgPT4gZX1cbiAgICAgICAgICAgIGNsZWFySW5wdXQ9eygpID0+IGdvYWwuc2V0R29hbEZyZXF1ZW5jeShcIlwiKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCb3R0b21TaGVldFxuICAgICAgICAgICAgb3Blbj17Z29hbENvbnRyaWJ1dGlvblNldHRpbmdzLm9wZW5Db250cmlidXRpb25TZXR0aW5nc1NoZWV0fVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyNCxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjaGlsZHJlbj17XG4gICAgICAgICAgICAgIDxBZGRDb250cmlidXRpb25TZXR0aW5nc1xuICAgICAgICAgICAgICAgIHVwZGF0aW5nR29hbD17dHJ1ZX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBnb2FsQ29udHJpYnV0aW9uU2V0dGluZ3Mub3BlbkNvbnRyaWJ1dGlvblNldHRpbmdzQm90dG9tU2hlZXQoXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgZ29hbENvbnRyaWJ1dGlvblNldHRpbmdzLnNldENvbnRyaWJ1dGlvbkFtb3VudCgwKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdFNuYXA9ezMwMH1cbiAgICAgICAgICA+PC9Cb3R0b21TaGVldD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICAgIDxUZXh0SW5wdXRXaXRoUG9wdXBcbiAgICAgICAgICAgIHBsYWNlSG9sZGVyPVwiTGluayBiYW5rIG9yIHdhbGxldFwiXG4gICAgICAgICAgICBsYWJlbD1cIkxpbmsgYW4gYWNjb3VudCBhbmQgdHJhY2sgc2F2aW5ncyB3aXRoIGVhc2VcIlxuICAgICAgICAgICAgdmFsdWU9e1xuICAgICAgICAgICAgICBPYmplY3Qua2V5cyhhY2NvdW50U3RvcmUuc2F2aW5nQWNjb3VudCkubGVuZ3RoICE9PSAwXG4gICAgICAgICAgICAgICAgPyBgJHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFN0b3JlLnNhdmluZ0FjY291bnQuc2F2aW5nc19hY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgLnNhdmluZ3NfYWNjb3VudF9kZXRhaWxzLmJhbmtfbmFtZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgOiBhY2NvdW50U3RvcmUuc2F2aW5nQWNjb3VudC5zYXZpbmdzX2FjY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnNhdmluZ3NfYWNjb3VudF9kZXRhaWxzPy5iYW5rX25hbWVcbiAgICAgICAgICAgICAgICAgIH0sJHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFN0b3JlLnNhdmluZ0FjY291bnQuc2F2aW5nc19hY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgLnNhdmluZ3NfYWNjb3VudF9kZXRhaWxzLmFjY291bnRfbnVtYmVyID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICA/IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICA6IG1hc2tDcmVkaXRDYXJkTnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50U3RvcmUuc2F2aW5nQWNjb3VudC5zYXZpbmdzX2FjY291bnQuc2F2aW5nc19hY2NvdW50X2RldGFpbHM/LmFjY291bnRfbnVtYmVyLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH1gXG4gICAgICAgICAgICAgICAgOiBcIlwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYXNWYWx1ZT17XG4gICAgICAgICAgICAgIE9iamVjdC5rZXlzKGFjY291bnRTdG9yZS5zYXZpbmdBY2NvdW50KS5sZW5ndGggIT09IDBcbiAgICAgICAgICAgICAgICA/ICEhYWNjb3VudFN0b3JlLnNhdmluZ0FjY291bnQuc2F2aW5nc19hY2NvdW50XG4gICAgICAgICAgICAgICAgICAgIC5zYXZpbmdzX2FjY291bnRfZGV0YWlscz8uYmFua19uYW1lXG4gICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVhZGluZ0ljb249ezxGaVBvY2tldCBzaXplPVwiMS4zNzVyZW1cIiAvPn1cbiAgICAgICAgICAgIGFkZFZhbHVlPXsoZSkgPT4gZX1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgLy8gYWNjb3VudFN0b3JlLm9wZW5VcGRhdGVBY2NvdW50Qm90dG9tU2hlZXQodHJ1ZSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2xlYXJJbnB1dD17KCkgPT4ge1xuICAgICAgICAgICAgICAvLyBhY2NvdW50U3RvcmUuc2V0U2F2aW5nQWNjb3VudCh7fSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEJvdHRvbVNoZWV0XG4gICAgICAgICAgICBvbkRpc21pc3M9eygpID0+IGFjY291bnRTdG9yZS5vcGVuVXBkYXRlQWNjb3VudEJvdHRvbVNoZWV0KGZhbHNlKX1cbiAgICAgICAgICAgIG9wZW49e2FjY291bnRTdG9yZS51cGRhdGVBY2NvdW50Qm90dG9tU2hlZXR9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDI0LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGNoaWxkcmVuPXs8U2VsZWN0QmFuayB1cGRhdGVCYW5rPXt0cnVlfSAvPn1cbiAgICAgICAgICAgIGRlZmF1bHRTbmFwPXszMDB9XG4gICAgICAgICAgPjwvQm90dG9tU2hlZXQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJtYi0xMFwiPlxuICAgICAgICAgIDxUZXh0SW5wdXRXaXRoUG9wdXBcbiAgICAgICAgICAgIHBsYWNlSG9sZGVyPVwiQXBwbHkgc2F2aW5ncyBydWxlXCJcbiAgICAgICAgICAgIGhhc1ZhbHVlPXtmYWxzZX1cbiAgICAgICAgICAgIGxhYmVsPVwiQm9vc3QgeW91ciBzYXZpbmdzIGpvdXJuZXkgd2l0aCBydWxlc1wiXG4gICAgICAgICAgICB2YWx1ZT1cIlwiXG4gICAgICAgICAgICBsZWFkaW5nSWNvbj17PEZpVHJlbmRpbmdVcCBzaXplPVwiMS4zNzVyZW1cIiAvPn1cbiAgICAgICAgICAgIGFkZFZhbHVlPXsoZSkgPT4gZX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj4gKi99XG4gICAgICAgIDxNYWluQnV0dG9uXG4gICAgICAgICAgdGl0bGU9XCJTYXZlIGNoYW5nZXNcIlxuICAgICAgICAgIGNsaWNrPXsoKSA9PiB1cGRhdGVHb2FscygpfVxuICAgICAgICAgIGxvYWRpbmc9e2lzTG9hZGluZ31cbiAgICAgICAgICBpc0Rpc2FibGVkPXshdmFsaWR9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5leHBvcnQgZGVmYXVsdCBVcGRhdGVHb2FsRGV0YWlscztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==